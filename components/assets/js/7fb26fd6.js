import{r as t,h as e,j as a}from"./c7c14c1e.js";import{i,a as o}from"./6d31a050.js";import{C as n,_ as l,g as s,a as r,n as c,i as p,p as d,r as m,b as u,e as h,G as y,u as f,c as b,d as g,Z as x,s as S,f as v,h as _,t as w,R as I,j as M,k as P,l as D,m as R,o as z,q as B,v as C,w as L,x as E,y as A,L as F}from"./39317677.js";import{B as O,i as T}from"./cd46225a.js";var Y=["itemStyle","borderWidth"],G=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],X=new n;function V(t,e,a,i){var o=t.getItemLayout(e),n=a.get("symbolRepeat"),l=a.get("symbolClip"),s=a.get("symbolPosition")||"start",r=(a.get("symbolRotate")||0)*Math.PI/180||0,y=a.get("symbolPatternSize")||2,f=a.isAnimationEnabled(),b={dataIndex:e,layout:o,itemModel:a,symbolType:t.getItemVisual(e,"symbol")||"circle",style:t.getItemVisual(e,"style"),symbolClip:l,symbolRepeat:n,symbolRepeatDirection:a.get("symbolRepeatDirection"),symbolPatternSize:y,rotation:r,animationModel:f?a:null,hoverScale:f&&a.get(["emphasis","scale"]),z2:a.getShallow("z",!0)||0};!function(t,e,a,i,o){var n,l=i.valueDim,s=t.get("symbolBoundingData"),r=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),c=r.toGlobalCoord(r.dataToCoord(0)),d=1-+(a[l.wh]<=0);if(p(s)){var m=[j(r,s[0])-c,j(r,s[1])-c];m[1]<m[0]&&m.reverse(),n=m[d]}else n=null!=s?j(r,s)-c:e?i.coordSysExtent[l.index][d]-c:a[l.wh];o.boundingLength=n,e&&(o.repeatCutLength=a[l.wh]);o.pxSign=n>0?1:-1}(a,n,o,i,b),function(t,e,a,i,o,n,l,s,r,c){var m,u=r.valueDim,h=r.categoryDim,y=Math.abs(a[h.wh]),f=t.getItemVisual(e,"symbolSize");m=p(f)?f.slice():null==f?["100%","100%"]:[f,f];m[h.index]=d(m[h.index],y),m[u.index]=d(m[u.index],i?y:Math.abs(n)),c.symbolSize=m;var b=c.symbolScale=[m[0]/s,m[1]/s];b[u.index]*=(r.isHorizontal?-1:1)*l}(t,e,o,n,0,b.boundingLength,b.pxSign,y,i,b),function(t,e,a,i,o){var n=t.get(Y)||0;n&&(X.attr({scaleX:e[0],scaleY:e[1],rotation:a}),X.updateTransform(),n/=X.getLineScale(),n*=e[i.valueDim.index]);o.valueLineWidth=n||0}(a,b.symbolScale,r,i,b);var g=b.symbolSize,x=c(a.get("symbolOffset"),g);return function(t,e,a,i,o,n,l,s,r,c,p,y){var f=p.categoryDim,b=p.valueDim,g=y.pxSign,x=Math.max(e[b.index]+s,0),S=x;if(i){var v=Math.abs(r),_=m(t.get("symbolMargin"),"15%")+"",w=!1;_.lastIndexOf("!")===_.length-1&&(w=!0,_=_.slice(0,_.length-1));var I=d(_,e[b.index]),M=Math.max(x+2*I,0),P=w?0:2*I,D=u(i),R=D?i:it((v+P)/M);M=x+2*(I=(v-R*x)/2/(w?R:Math.max(R-1,1))),P=w?0:2*I,D||"fixed"===i||(R=c?it((Math.abs(c)+P)/M):0),S=R*M-P,y.repeatTimes=R,y.symbolMargin=I}var z=g*(S/2),B=y.pathPosition=[];B[f.index]=a[f.wh]/2,B[b.index]="start"===l?z:"end"===l?r-z:r/2,n&&(B[0]+=n[0],B[1]+=n[1]);var C=y.bundlePosition=[];C[f.index]=a[f.xy],C[b.index]=a[b.xy];var L=y.barRectShape=h({},a);L[b.wh]=g*Math.max(Math.abs(a[b.wh]),Math.abs(B[b.index]+z)),L[f.wh]=a[f.wh];var E=y.clipShape={};E[f.xy]=-a[f.xy],E[f.wh]=p.ecSize[f.wh],E[b.xy]=0,E[b.wh]=a[b.wh]}(a,g,o,n,0,x,s,b.valueLineWidth,b.boundingLength,b.repeatCutLength,i,b),b}function j(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function W(t){var e=t.symbolPatternSize,a=P(t.symbolType,-e/2,-e/2,e,e);return a.attr({culling:!0}),"image"!==a.type&&a.setStyle({strokeNoScale:!0}),a}function k(t,e,a,i){var o=t.__pictorialBundle,n=a.symbolSize,l=a.valueLineWidth,s=a.pathPosition,r=e.valueDim,c=a.repeatTimes||0,p=0,d=n[e.valueDim.index]+l+2*a.symbolMargin;for(tt(t,(function(t){t.__pictorialAnimationIndex=p,t.__pictorialRepeatTimes=c,p<c?et(t,null,h(p),a,i):et(t,null,{scaleX:0,scaleY:0},a,i,(function(){o.remove(t)})),p++}));p<c;p++){var m=W(a);m.__pictorialAnimationIndex=p,m.__pictorialRepeatTimes=c,o.add(m);var u=h(p);et(m,{x:u.x,y:u.y,scaleX:0,scaleY:0},{scaleX:u.scaleX,scaleY:u.scaleY,rotation:u.rotation},a,i)}function h(t){var e=s.slice(),i=a.pxSign,o=t;return("start"===a.symbolRepeatDirection?i>0:i<0)&&(o=c-1-t),e[r.index]=d*(o-c/2+.5)+s[r.index],{x:e[0],y:e[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation}}}function U(t,e,a,i){var o=t.__pictorialBundle,n=t.__pictorialMainPath;n?et(n,null,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:a.symbolScale[0],scaleY:a.symbolScale[1],rotation:a.rotation},a,i):(n=t.__pictorialMainPath=W(a),o.add(n),et(n,{x:a.pathPosition[0],y:a.pathPosition[1],scaleX:0,scaleY:0,rotation:a.rotation},{scaleX:a.symbolScale[0],scaleY:a.symbolScale[1]},a,i))}function H(t,e,a){var i=h({},e.barRectShape),o=t.__pictorialBarRect;o?et(o,null,{shape:i},e,a):((o=t.__pictorialBarRect=new I({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,t.add(o))}function q(t,e,a,i){if(a.symbolClip){var o=t.__pictorialClipPath,n=h({},a.clipShape),l=e.valueDim,s=a.animationModel,r=a.dataIndex;if(o)f(o,{shape:n},s,r);else{n[l.wh]=0,o=new I({shape:n}),t.__pictorialBundle.setClipPath(o),t.__pictorialClipPath=o;var c={};c[l.wh]=a.clipShape[l.wh],M[i?"updateProps":"initProps"](o,{shape:c},s,r)}}}function N(t,e){var a=t.getItemModel(e);return a.getAnimationDelayParams=Z,a.isAnimationEnabled=J,a}function Z(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function J(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function K(t,e,a,i){var o=new y,n=new y;return o.add(n),o.__pictorialBundle=n,n.x=a.bundlePosition[0],n.y=a.bundlePosition[1],a.symbolRepeat?k(o,e,a):U(o,0,a),H(o,a,i),q(o,e,a,i),o.__pictorialShapeStr=$(t,a),o.__pictorialSymbolMeta=a,o}function Q(t,e,a,i){var o=i.__pictorialBarRect;o&&o.removeTextContent();var n=[];tt(i,(function(t){n.push(t)})),i.__pictorialMainPath&&n.push(i.__pictorialMainPath),i.__pictorialClipPath&&(a=null),b(n,(function(t){g(t,{scaleX:0,scaleY:0},a,e,(function(){i.parent&&i.parent.remove(i)}))})),t.setItemGraphicEl(e,null)}function $(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function tt(t,e,a){b(t.__pictorialBundle.children(),(function(i){i!==t.__pictorialBarRect&&e.call(a,i)}))}function et(t,e,a,i,o,n){e&&t.attr(e),i.symbolClip&&!o?a&&t.attr(a):a&&M[o?"updateProps":"initProps"](t,a,i.animationModel,i.dataIndex,n)}function at(t,e,a){var i=a.dataIndex,o=a.itemModel,n=o.getModel("emphasis"),l=n.getModel("itemStyle").getItemStyle(),s=o.getModel(["blur","itemStyle"]).getItemStyle(),r=o.getModel(["select","itemStyle"]).getItemStyle(),c=o.getShallow("cursor"),p=n.get("focus"),d=n.get("blurScope"),m=n.get("scale");tt(t,(function(t){if(t instanceof x){var e=t.style;t.useStyle(h({image:e.image,x:e.x,y:e.y,width:e.width,height:e.height},a.style))}else t.useStyle(a.style);var i=t.ensureState("emphasis");i.style=l,m&&(i.scaleX=1.1*t.scaleX,i.scaleY=1.1*t.scaleY),t.ensureState("blur").style=s,t.ensureState("select").style=r,c&&(t.cursor=c),t.z2=a.z2}));var u=e.valueDim.posDesc[+(a.boundingLength>0)],y=t.__pictorialBarRect;S(y,_(o),{labelFetcher:e.seriesModel,labelDataIndex:i,defaultText:v(e.seriesModel.getData(),i),inheritColor:a.style.fill,defaultOpacity:a.style.opacity,defaultOutsidePosition:u}),w(t,p,d,n.get("disabled"))}function it(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}const ot=function(t){function e(){var a=null!==t&&t.apply(this,arguments)||this;return a.type=e.type,a}return l(e,t),e.prototype.render=function(t,e,a){var i=this.group,o=t.getData(),n=this._data,l=t.coordinateSystem,s=l.getBaseAxis().isHorizontal(),r=l.master.getRect(),c={ecSize:{width:a.getWidth(),height:a.getHeight()},seriesModel:t,coordSys:l,coordSysExtent:[[r.x,r.x+r.width],[r.y,r.y+r.height]],isHorizontal:s,valueDim:G[+s],categoryDim:G[1-+s]};return o.diff(n).add((function(t){if(o.hasValue(t)){var e=N(o,t),a=V(o,t,e,c),n=K(o,c,a);o.setItemGraphicEl(t,n),i.add(n),at(n,c,a)}})).update((function(t,e){var a=n.getItemGraphicEl(e);if(o.hasValue(t)){var l=N(o,t),s=V(o,t,l,c),r=$(o,s);a&&r!==a.__pictorialShapeStr&&(i.remove(a),o.setItemGraphicEl(t,null),a=null),a?function(t,e,a){var i=a.animationModel,o=a.dataIndex,n=t.__pictorialBundle;f(n,{x:a.bundlePosition[0],y:a.bundlePosition[1]},i,o),a.symbolRepeat?k(t,e,a,!0):U(t,e,a,!0);H(t,a,!0),q(t,e,a,!0)}(a,c,s):a=K(o,c,s,!0),o.setItemGraphicEl(t,a),a.__pictorialSymbolMeta=s,i.add(a),at(a,c,s)}else i.remove(a)})).remove((function(t){var e=n.getItemGraphicEl(t);e&&Q(n,t,e.__pictorialSymbolMeta.animationModel,e)})).execute(),this._data=o,this.group},e.prototype.remove=function(t,e){var a=this.group,i=this._data;t.get("animation")?i&&i.eachItemGraphicEl((function(e){Q(i,s(e).dataIndex,t,e)})):a.removeAll()},e.type="pictorialBar",e}(r);const nt=function(t){function e(){var a=null!==t&&t.apply(this,arguments)||this;return a.type=e.type,a.hasSymbolVisual=!0,a.defaultSymbol="roundRect",a}return l(e,t),e.prototype.getInitialData=function(e){return e.stack=null,t.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=D(O.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(O);C([i,E,o,T,function(t){t.registerChartView(ot),t.registerSeriesModel(nt),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,R(B,"pictorialBar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,z("pictorialBar"))},A]);const lt=({width:i,height:o})=>{const n=t.exports.useRef(null);return t.exports.useEffect((()=>{const t=L(n.current),a=[120,200,150,80,70,110];let i=["#43E29D","#FBAD15","#FF994E","#FF77B3","#6791FF","#2C63FC"],o=["#43E29D","#FBAD15","#FF994E","#FF77B3","#6791FF","#2C63FC"].map((t=>e(t,.1)));const l={grid:{top:"15%",bottom:"20%",left:"3%",right:"3%"},xAxis:{data:a,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!0,interval:0,margin:25,align:"center",textStyle:{fontSize:12,color:"#ffffff"}}},yAxis:{splitLine:{show:!1},axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1}},series:[{name:"柱顶部",type:"pictorialBar",symbolSize:[26,10],symbolOffset:[0,-5],z:12,itemStyle:{normal:{color:function(t){return i[t.dataIndex]}}},label:{show:!0,position:"top",fontSize:20,fontFamily:"tenxu",formatter:"{c}"},symbolPosition:"end",data:a},{name:"柱底部",type:"pictorialBar",symbolSize:[26,10],symbolOffset:[0,5],z:12,itemStyle:{normal:{color:function(t){return i[t.dataIndex]}}},data:a},{name:"第一圈",type:"pictorialBar",symbolSize:[46,16],symbolOffset:[0,11],z:11,itemStyle:{normal:{color:function(t){return i[t.dataIndex]},opacity:.2}},data:a},{name:"第二圈",type:"pictorialBar",symbolSize:[64,22],symbolOffset:[0,17],z:10,itemStyle:{normal:{color:function(t){return i[t.dataIndex]},opacity:.1}},data:a},{type:"bar",itemStyle:{normal:{color:function(t){return new F(0,0,0,1,[{offset:1,color:i[t.dataIndex]},{offset:0,color:o[t.dataIndex]}])},opacity:.8}},z:16,silent:!0,barWidth:26,barGap:"-100%",data:a}],animationDuration:1e3,animationDurationUpdate:3e3,animationEasing:"linear",animationEasingUpdate:"linear"};return t.setOption(l),()=>{}}),[]),a("section",{style:{width:i,height:o},children:a("div",{ref:n,style:{height:"100%"}})})},st=()=>a("section",{style:{width:600,height:320,position:"absolute",top:0,left:0,right:0,bottom:0,margin:"auto"},children:a(lt,{width:600,height:320})});export{st as default};
